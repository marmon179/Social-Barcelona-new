(this["webpackJsonpmy-app-social"]=this["webpackJsonpmy-app-social"]||[]).push([[0],{112:function(e,t,s){e.exports={message:"Message_message__3jJmh"}},116:function(e,t,s){e.exports={wrapper:"Preloader_wrapper__2ZuKK"}},123:function(e,t,s){},14:function(e,t,s){e.exports={navbar:"Navbar_navbar__14eAf",list:"Navbar_list__9BMCG",link:"Navbar_link__2N6MG",activeLink:"Navbar_activeLink__3gIL1"}},245:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),r=s(51),i=s.n(r),c=(s(123),s(73)),o=s.n(c),l=s(10),u=s(14),d=s.n(u),p=s(0),j=function(){return Object(p.jsx)("nav",{className:d.a.navbar,children:Object(p.jsxs)("ul",{className:d.a.list,children:[Object(p.jsx)("li",{children:Object(p.jsx)(l.b,{exact:!0,to:"/login",className:d.a.link,activeClassName:d.a.activeLink,children:"Login"})}),Object(p.jsx)("li",{children:Object(p.jsx)(l.b,{to:"/profile",className:d.a.link,activeClassName:d.a.activeLink,children:"Profile"})}),Object(p.jsx)("li",{children:Object(p.jsx)(l.b,{to:"/dialogs",className:d.a.link,activeClassName:d.a.activeLink,children:"Dialogs"})}),Object(p.jsx)("li",{children:Object(p.jsx)(l.b,{to:"/settings",className:d.a.link,activeClassName:d.a.activeLink,children:"Settings"})}),Object(p.jsx)("li",{children:Object(p.jsx)(l.b,{to:"/users",className:d.a.link,activeClassName:d.a.activeLink,children:"Users"})})]})})},b=s(8),g=s(33),O=s(4),h={dialogs:[{id:1,name:"Sascha"},{id:2,name:"Maksim"},{id:3,name:"Katia"}],messages:[{id:1,message:"Hello"},{id:2,message:"Hi!"},{id:3,message:"hello"}]},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST_DIALOG":var s={id:4,message:t.newMessageBody};return Object(O.a)(Object(O.a)({},e),{},{messages:[].concat(Object(g.a)(e.messages),[s])})}return e},m=s(28),x=s.n(m),_=s(76),v=s.n(_),w=function(e){var t="/dialogs/"+e.id;return Object(p.jsx)("div",{children:Object(p.jsx)(l.b,{to:t,className:v.a.dialogName,activeClassName:v.a.activeLink,children:e.name})})},P=s(112),S=s.n(P),N=function(e){return Object(p.jsx)("div",{className:S.a.message,children:e.message})},I=s(247),D=s(246),y=Object(D.a)({form:"dialogAddMessageForm"})((function(e){return Object(p.jsxs)("form",{onSubmit:e.handleSubmit,className:x.a.wrapperTextarea,children:[Object(p.jsx)("div",{children:Object(p.jsx)(I.a,{component:"textarea",name:"newMessageBody",placeholder:"Enter your message"})}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{children:"Add post"})})]})})),T=function(e){var t=e.dialogs.map((function(e){return Object(p.jsx)(w,{name:e.name,id:e.id},e.id)})),s=e.messages.map((function(e){return Object(p.jsx)("div",{children:Object(p.jsx)(N,{message:e.message,id:e.id},e.id)})}));return Object(p.jsxs)("div",{className:x.a.wrapper,children:[Object(p.jsx)("div",{className:x.a.wrapperImage,children:Object(p.jsx)("img",{src:"https://www.fcbarcelona.com/photo-resources/2020/11/02/d2c1d3ab-437b-400a-8df2-3e420b9f0799/imatge_avatars02.jpg?width=1024&height=448",alt:"Barca"})}),Object(p.jsxs)("div",{className:x.a.wrapperWrapper,children:[Object(p.jsxs)("div",{className:x.a.dialogsWrapper,children:[Object(p.jsx)("div",{children:t}),Object(p.jsx)("div",{children:s})]}),Object(p.jsx)(y,{onSubmit:function(t){e.addPost(t.newMessageBody)}})]})]})},L=s(9),C=s(118),k=function(e){return{isAuth:e.auth.isAuth}};function E(e){return Object(L.b)(k)((function(t){var s=t.isAuth,a=Object(C.a)(t,["isAuth"]);return s?Object(p.jsx)(e,Object(O.a)({},a)):Object(p.jsx)(b.a,{to:"/login"})}))}var U=s(7),A=Object(U.d)(Object(L.b)((function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages}}),(function(e){return{addPost:function(t){e(function(e){return{type:"ADD_POST_DIALOG",newMessageBody:e}}(t))}}})),E)(T),M=s(21),F=s(22),G=s(24),B=s(23),W=s(115),R=s.n(W).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"9cd2c268-195b-4b42-abcf-5a1644af026e"}}),z=function(e,t){return R.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},Y=function(e){return console.warn("Obsolete method.Please profileAPI object."),H.getUserProfile(e)},H={getUserProfile:function(e){return R.get("profile/"+e)},getStatus:function(e){return R.get("profile/status/"+e)},updateStatus:function(e){return R.put("profile/status/",{status:e})}},Z=function(){return R.get("auth/me")},J={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},K=function(e){return{type:"FOLLOW",userID:e}},Q=function(e){return{type:"UNFOLLOW",userID:e}},V=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},X=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userID:t}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(O.a)(Object(O.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(O.a)(Object(O.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(O.a)(Object(O.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(O.a)(Object(O.a)({},e),{},{followed:!1}):e}))});case"SET_USERS":return Object(O.a)(Object(O.a)({},e),{},{users:t.users});case"SET_CURRENT_PAGE":return Object(O.a)(Object(O.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(O.a)(Object(O.a)({},e),{},{totalUsersCount:t.count});case"TOGGLE_IS_FETCHING":return Object(O.a)(Object(O.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(O.a)(Object(O.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(g.a)(e.followingInProgress),[t.userID]):e.followingInProgress.filter((function(e){return e!=t.userID}))});default:return e}},$=s(80),ee=s.n($),te=s.p+"static/media/user-male.3759889a.png",se=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),s=[],a=1;a<=t;a++)s.push(a);return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:s.map((function(t){return Object(p.jsx)("span",{className:e.currentPage===t?ee.a.selectedPage:"",onClick:function(){e.onPageChanged(t)},children:t})}))}),e.users.users.map((function(t){return Object(p.jsxs)("div",{children:[Object(p.jsxs)("span",{children:[Object(p.jsx)("div",{children:Object(p.jsx)(l.b,{to:"/profile/"+t.id,children:Object(p.jsx)("img",{src:null!=t.photos.small?t.photos.small:te,alt:"image",className:ee.a.userPhoto})})}),Object(p.jsx)("div",{children:t.followed?Object(p.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.unfollow(t.id)},children:"UnFollow"}):Object(p.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.follow(t.id)},children:"Follow"})})]}),Object(p.jsxs)("span",{children:[Object(p.jsxs)("span",{children:[Object(p.jsx)("div",{children:t.name}),Object(p.jsx)("div",{children:t.status})]}),Object(p.jsxs)("span",{children:[Object(p.jsx)("div",{children:"u.location.country"}),Object(p.jsx)("div",{children:"u.location.city"})]})]})]},t.id)}))]})},ae=s.p+"static/media/Ball-1s-200px.0c804b5d.svg",ne=s(116),re=s.n(ne),ie=function(e){return Object(p.jsx)("div",{className:re.a.wrapper,children:Object(p.jsx)("img",{src:ae})})},ce=function(e){Object(G.a)(s,e);var t=Object(B.a)(s);function s(){var e;Object(M.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).onPageChanged=function(t){e.props.getUsers(t,e.props.pageSize)},e}return Object(F.a)(s,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(p.jsxs)(p.Fragment,{children:[this.props.isFetching?Object(p.jsx)(ie,{}):null,Object(p.jsx)(se,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,toggleFollowingProgress:this.props.toggleFollowingProgress,followingInProgress:this.props.followingInProgress})]})}}]),s}(n.a.Component),oe=Object(U.d)(E,Object(L.b)((function(e){return{users:e.userPage,pageSize:e.userPage.pageSize,totalUsersCount:e.userPage.totalUsersCount,currentPage:e.userPage.currentPage,isFetching:e.userPage.isFetching,followingInProgress:e.userPage.followingInProgress}}),{follow:K,unfollow:Q,setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},toggleFollowingProgress:X,getUsers:function(e,t){return function(s){s(V(!0)),z(e,t).then((function(e){s(V(!1)),s({type:"SET_USERS",users:e.items}),s({type:"SET_TOTAL_USERS_COUNT",count:e.totalCount})}))}}}))(ce),le=s(81),ue=s.n(le),de=function(e){return Object(p.jsxs)("div",{className:ue.a.header,children:[Object(p.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/en/thumb/4/47/FC_Barcelona_%28crest%29.svg/1200px-FC_Barcelona_%28crest%29.svg.png",alt:"Logo"}),Object(p.jsx)("div",{className:ue.a.loginBlock,children:e.isAuth?e.login:Object(p.jsx)(l.b,{to:"/login",children:"Login"})})]})},pe={userId:null,email:null,login:null,isAuth:!1},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-USER-DATA":return Object(O.a)(Object(O.a)(Object(O.a)({},e),t.data),{},{isAuth:!0});default:return e}},be=function(e){Object(G.a)(s,e);var t=Object(B.a)(s);function s(){return Object(M.a)(this,s),t.apply(this,arguments)}return Object(F.a)(s,[{key:"componentDidMount",value:function(){this.props.getAuthUserData()}},{key:"render",value:function(){return Object(p.jsx)(de,Object(O.a)({},this.props))}}]),s}(n.a.Component),ge=Object(L.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{getAuthUserData:function(){return function(e){return Z().then((function(t){if(0===t.data.resultCode){var s=t.data.data,a=s.id,n=s.login,r=s.email;e(function(e,t,s){return{type:"SET-USER-DATA",data:{userID:e,email:t,login:s}}}(a,r,n))}}))}}})(be),Oe=Object(D.a)({form:"login"})((function(e){return Object(p.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(p.jsx)("div",{children:Object(p.jsx)(I.a,{placeholder:"Login",name:"login",component:"input"})}),Object(p.jsx)("div",{children:Object(p.jsx)(I.a,{placeholder:"Password",name:"password",component:"input"})}),Object(p.jsx)("div",{children:Object(p.jsx)(I.a,{type:"checkbox",name:"rememberMe",component:"input"})}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{children:"Login"})})]})})),he=function(e){console.log(e)},fe=function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Login"}),Object(p.jsx)(Oe,{onSubmit:he})]})},me=s(54),xe=s.n(me),_e=s(41),ve=s.n(_e),we=s(42),Pe=s.n(we),Se=function(e){return Object(p.jsxs)("div",{className:Pe.a.postItem,children:[Object(p.jsx)("div",{className:Pe.a.avatar,children:Object(p.jsx)("img",{src:"https://pbs.twimg.com/profile_images/2881220369/2b27ac38b43b17a8c5eacfc443ce3384_400x400.jpeg",alt:"avatar"})}),Object(p.jsx)("div",{className:Pe.a.angle}),Object(p.jsx)("div",{className:Pe.a.postMessage,children:e.message})]})},Ne=Object(D.a)({form:"ProfileAddNewPostForm"})((function(e){return Object(p.jsxs)("form",{onSubmit:e.handleSubmit,className:ve.a.wrapperTextarea,children:[Object(p.jsx)("div",{children:Object(p.jsx)(I.a,{component:"textarea",name:"newMessageBody",placeholder:"Enter your message"})}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{children:"Add post"})})]})})),Ie=function(e){var t=e.dialogsData.map((function(e){return Object(p.jsx)(Se,{message:e.message,id:e.id},e.id)}));return Object(p.jsxs)("div",{className:ve.a.postList,children:[Object(p.jsx)("div",{className:ve.a.wrapperDialogs,children:t}),Object(p.jsx)(Ne,{onSubmit:function(t){e.addPost(t.newMessageBody)}})]})},De={dialogsData:[{id:1,message:"Hello people!!!!"},{id:2,message:"How are you?"},{id:3,message:"Very nice!!!"}],profile:null,status:""},ye=function(e){return{type:"SET-STATUS",status:e}},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var s={id:4,message:t.newMessageBody};return Object(O.a)(Object(O.a)({},e),{},{dialogsData:[].concat(Object(g.a)(e.dialogsData),[s])});case"SET-STATUS":return Object(O.a)(Object(O.a)({},e),{},{status:t.status});case"SET_USER_PROFILE":return Object(O.a)(Object(O.a)({},e),{},{profile:t.profile});default:return e}},Le=Object(L.b)((function(e){return{dialogsData:e.profilePage.dialogsData,profile:e.profilePage.profile,status:e.profilePage.status}}),(function(e){return{addPost:function(t){e(function(e){return{type:"ADD-POST",newMessageBody:e}}(t))}}}))(Ie),Ce=s(34),ke=s.n(Ce),Ee=function(e){Object(G.a)(s,e);var t=Object(B.a)(s);function s(){var e;Object(M.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={editMode:!1,status:e.props.status},e.activateEditMode=function(){e.setState({editMode:!0})},e.deactivateEditMode=function(){e.setState({editMode:!1}),e.props.updateStatus(e.state.status)},e.onStatusChange=function(t){e.setState({status:t.currentTarget.value})},e}return Object(F.a)(s,[{key:"componentDidUpdate",value:function(e,t){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return Object(p.jsxs)("div",{children:[!this.state.editMode&&Object(p.jsx)("div",{children:Object(p.jsx)("span",{onClick:this.activateEditMode,children:this.props.status||"----"})}),this.state.editMode&&Object(p.jsx)("div",{children:Object(p.jsx)("input",{onChange:this.onStatusChange,onBlur:this.deactivateEditMode,value:this.state.status,autoFocus:!0})})]})}}]),s}(n.a.Component),Ue=function(e){return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:ke.a.wrapperInfo,children:[Object(p.jsx)("div",{className:ke.a.imgAvatar,children:Object(p.jsx)("img",{src:e.profile.photos.large,alt:"img"})}),Object(p.jsxs)("div",{className:ke.a.wrapperStatus,children:[Object(p.jsx)("div",{className:ke.a.status,children:Object(p.jsx)(Ee,{status:e.status,updateStatus:e.updateStatus})}),Object(p.jsxs)("div",{className:ke.a.wrapperTextInfo,children:[Object(p.jsx)("h3",{children:e.profile.fullName}),Object(p.jsx)("h4",{children:e.profile.aboutMe})]})]})]})})},Ae=function(e){if(!e.profile)return Object(p.jsx)(ie,{});return Object(p.jsxs)("div",{className:xe.a.wrapper,children:[Object(p.jsx)("div",{className:xe.a.wrapperImg,children:Object(p.jsx)("img",{src:"https://store.fcbarcelona.com/medias/Secciones-Desktop-copy.jpg?context=bWFzdGVyfHJvb3R8NDUyNDkyfGltYWdlL2pwZWd8aDQzL2g1OC84ODc4MzQwMDQ2ODc4L1NlY2Npb25lc19EZXNrdG9wIGNvcHkuanBnfGQwOWY1YzQ2OWYxZGY2ZDUyMzcxMThkMjgwNGNlNDBjZWM1YTc5ZDJlYzFkN2Y3ODFiYWI0NzEwNWVjMWI4MWU",alt:"Barca"})}),Object(p.jsx)(Ue,{profile:e.profile,status:e.status,updateStatus:e.updateStatus}),Object(p.jsx)("div",{className:xe.a.wrapperDialogs,children:Object(p.jsx)(Le,{})})]})},Me=function(e){Object(G.a)(s,e);var t=Object(B.a)(s);function s(){return Object(M.a)(this,s),t.apply(this,arguments)}return Object(F.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e="2"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"render",value:function(){return Object(p.jsx)(Ae,Object(O.a)(Object(O.a)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus}))}}]),s}(n.a.Component),Fe=Object(U.d)(Object(L.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status}}),{getUserProfile:function(e){return function(t){Y(e).then((function(e){t({type:"SET_USER_PROFILE",profile:e.data})}))}},getStatus:function(e){return function(t){H.getStatus(e).then((function(e){t(ye(e.data))}))}},updateStatus:function(e){return function(t){H.updateStatus(e).then((function(s){0===s.data.resultCode&&t(ye(e))}))}}}),b.f,E)(Me);var Ge=function(){return Object(p.jsx)(l.a,{children:Object(p.jsxs)("div",{className:o.a.wrapper,children:[Object(p.jsx)(ge,{}),Object(p.jsx)(j,{}),Object(p.jsxs)("div",{className:o.a.appWrapperContent,children:[Object(p.jsx)(b.b,{path:"/profile/:userId?",render:function(){return Object(p.jsx)(Fe,{})}}),Object(p.jsx)(b.b,{path:"/dialogs",render:function(){return Object(p.jsx)(A,{})}}),Object(p.jsx)(b.b,{path:"/users",render:function(){return Object(p.jsx)(oe,{})}}),Object(p.jsx)(b.b,{path:"/login",render:function(){return Object(p.jsx)(fe,{})}})]})]})})},Be=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,249)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;s(e),a(e),n(e),r(e),i(e)}))},We=s(117),Re=s(248),ze=Object(U.c)({profilePage:Te,dialogsPage:f,userPage:q,auth:je,form:Re.a}),Ye=Object(U.e)(ze,Object(U.a)(We.a));i.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsxs)(L.a,{store:Ye,children:[Object(p.jsx)(Ge,{}),","]})}),document.getElementById("root")),Be()},28:function(e,t,s){e.exports={wrapper:"Dialogs_wrapper__i2TJU",wrapperImage:"Dialogs_wrapperImage__31RUS",wrapperWrapper:"Dialogs_wrapperWrapper__3N0Am",dialogsWrapper:"Dialogs_dialogsWrapper__3NLDW",wrapperTextarea:"Dialogs_wrapperTextarea__1l0_e"}},34:function(e,t,s){e.exports={wrapperInfo:"ProfileInfo_wrapperInfo___Xmfc",wrapperTextInfo:"ProfileInfo_wrapperTextInfo__22zT5",imgAvatar:"ProfileInfo_imgAvatar__15bpd",status:"ProfileInfo_status__14Bi-"}},41:function(e,t,s){e.exports={postList:"Posts_postList__1J7dT",wrapperDialogs:"Posts_wrapperDialogs__115nu",wrapperTextarea:"Posts_wrapperTextarea__3bl8m"}},42:function(e,t,s){e.exports={postItem:"Post_postItem__ukIZz",avatar:"Post_avatar__2zfO_",postMessage:"Post_postMessage__25xok",angle:"Post_angle__11NYP"}},54:function(e,t,s){e.exports={wrapper:"Profile_wrapper__1wbHz",wrapperImg:"Profile_wrapperImg__1o1XL",wrapperDialogs:"Profile_wrapperDialogs__1Rflb"}},73:function(e,t,s){e.exports={wrapper:"App_wrapper__2V1M4"}},76:function(e,t,s){e.exports={dialogName:"DialogItem_dialogName__2VBZG",activeLink:"DialogItem_activeLink__3IK2h"}},80:function(e,t,s){e.exports={userPhoto:"Users_userPhoto__233Xx",selectedPage:"Users_selectedPage__tagcj"}},81:function(e,t,s){e.exports={header:"Header_header__3Fm84",loginBlock:"Header_loginBlock__1OZ0X"}}},[[245,1,2]]]);
//# sourceMappingURL=main.23de0e9e.chunk.js.map